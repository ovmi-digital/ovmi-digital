---
import Base from "../../layouts/Base.astro";
import SideNav from "../../components/SideNav.astro";
import Footer from "../../components/Footer.astro";

const caseStudyLinks = [
  { label: "Problem", href: "#problem" },
  { label: "Built", href: "#built" },
  { label: "Works", href: "#works" },
  { label: "Stack", href: "#stack" },
  { label: "Open Source", href: "#opensource" },
];
---

<Base
  title="Turgor — Autonomous Greenhouse Intelligence | OVMI.DIGITAL"
  description="An open-source AI control system that keeps greenhouses alive autonomously. Raspberry Pi brain, ESP32 sensor nodes, safety-first architecture."
>
  <SideNav links={caseStudyLinks} />

  <article>
    <!-- ═══════════════════════════════════════════════════════════ HERO -->
    <header class="min-h-screen flex flex-col justify-between px-6 md:px-12 lg:px-20 pt-8 pb-0">
      <div class="flex items-center gap-3">
        <a href="/" class="flex items-center gap-3 hover:opacity-70 transition-opacity">
          <img src="/images/logo-mark.svg" alt="" class="h-8 w-8 dark:invert" />
          <span class="text-sm font-bold tracking-wide uppercase">OVMI</span>
        </a>
      </div>

      <div>
        <p class="text-sm font-bold tracking-[0.2em] uppercase mb-4
                  text-[var(--color-muted)] dark:text-[var(--color-muted-dark)]">
          Case Study
        </p>
        <h1
          class="font-black leading-[0.9] tracking-tight
                 text-[var(--color-text)] dark:text-[var(--color-text-dark)]"
          style="font-size: clamp(5rem, 14vw, 14rem);"
        >
          Turgor
        </h1>
        <p class="text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]
                  font-bold mt-4 text-lg max-w-md">
          Autonomous greenhouse intelligence. Open source.
        </p>
      </div>

      <div></div>
    </header>

    <!-- Hero image — full bleed -->
    <img
      src="/images/turgor-abstract.webp"
      alt="Abstract botanical cell symbol over a greenhouse interior"
      class="w-full object-cover"
      style="max-height: clamp(20rem, 50vh, 36rem);"
      loading="eager"
      decoding="async"
    />

    <!-- ═══════════════════════════════════════════════ 01 THE PROBLEM -->
    <section id="problem" class="pt-[clamp(6rem,12vh,10rem)] pb-[clamp(2rem,4vh,3rem)]">
      <div class="px-6 md:px-12 lg:px-20 mb-[clamp(3rem,6vh,5rem)]">
        <span
          class="block font-black text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]"
          style="font-size: clamp(3rem, 6vw, 5rem);"
        >01</span>
        <h2
          class="font-black leading-[1.05] tracking-tight mt-2"
          style="font-size: clamp(2rem, 4vw, 3.5rem);"
        >
          The Problem
        </h2>
        <p class="mt-6 leading-relaxed max-w-[640px]">
          Greenhouses need constant attention. Temperature swings, missed
          waterings, overnight frost — one bad day can undo weeks of growth.
          Existing automation is either dumb (fixed timers) or expensive
          (commercial systems locked behind subscriptions). Nothing sits in
          the middle: smart, affordable, and open.
        </p>
      </div>

      <!-- Full-bleed image -->
      <img
        src="/images/turgor-problem.webp"
        alt="Neglected greenhouse interior with frost on glass panels"
        class="w-full object-cover"
        style="max-height: clamp(18rem, 45vh, 32rem);"
        loading="lazy"
        decoding="async"
      />
    </section>

    <!-- ═══════════════════════════════════════════ PULL QUOTE 1 -->
    <div class="px-6 md:px-12 lg:px-20 py-[clamp(4rem,10vh,8rem)]">
      <p
        class="font-black leading-[1.15] max-w-3xl"
        style="font-size: clamp(1.75rem, 4vw, 3rem);"
      >
        Smart, affordable, and open.
        <span class="text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]">
          Nothing sat in the middle.
        </span>
      </p>
    </div>

    <!-- ═══════════════════════════════════════════ 02 WHAT WE BUILT -->
    <section id="built" class="px-6 md:px-12 lg:px-20 py-[clamp(4rem,8vh,6rem)]">
      <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 items-start">
        <!-- Image — slight left bleed on desktop -->
        <div class="w-full lg:w-[40%] lg:-ml-6">
          <img
            src="/images/turgor-built.webp"
            alt="Circuit board with glowing LEDs among greenhouse plants"
            class="w-full object-cover rounded-lg"
            style="min-height: clamp(16rem, 35vh, 28rem);"
            loading="lazy"
            decoding="async"
          />
        </div>

        <!-- Text — staggered down -->
        <div class="w-full lg:w-[60%] lg:pt-8">
          <span
            class="block font-black text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]"
            style="font-size: clamp(3rem, 6vw, 5rem);"
          >02</span>
          <h2
            class="font-black leading-[1.05] tracking-tight mt-2"
            style="font-size: clamp(2rem, 4vw, 3.5rem);"
          >
            What We Built
          </h2>
          <p class="mt-6 leading-relaxed max-w-[640px]">
            A two-layer control system. The field layer runs bare-metal Rust on
            a Raspberry Pi — it reads sensors, enforces safety rules, and keeps
            plants alive no matter what. The intelligence layer adds AI on top:
            an LLM that reasons about your greenhouse, makes decisions, explains
            itself, and talks to you over Telegram.
          </p>
          <p class="mt-4 leading-relaxed max-w-[640px]">
            If the AI goes down, the safety layer keeps running. Your plants
            never depend on an internet connection.
          </p>
        </div>
      </div>
    </section>

    <!-- ═══════════════════════════════════════════ 03 HOW IT WORKS -->
    <section id="works" class="pt-[clamp(4rem,8vh,6rem)] pb-[clamp(4rem,8vh,6rem)]">
      <!-- Full-bleed image above -->
      <img
        src="/images/turgor-works.webp"
        alt="Electronic sensors attached to plant stems with water droplets on leaves"
        class="w-full object-cover"
        style="max-height: clamp(18rem, 45vh, 32rem);"
        loading="lazy"
        decoding="async"
      />

      <!-- 30/70 label | content grid -->
      <div class="px-6 md:px-12 lg:px-20 mt-[clamp(3rem,6vh,5rem)]">
        <div class="flex flex-col lg:flex-row gap-4 lg:gap-12">
          <div class="lg:w-[30%]">
            <span
              class="block font-black text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]"
              style="font-size: clamp(3rem, 6vw, 5rem);"
            >03</span>
            <h2
              class="font-black leading-[1.05] tracking-tight mt-2"
              style="font-size: clamp(2rem, 4vw, 3.5rem);"
            >
              How It Works
            </h2>
          </div>
          <div class="lg:w-[70%] lg:pt-2">
            <p class="leading-relaxed max-w-[640px]">
              ESP32 microcontrollers scattered through the greenhouse read
              temperature, humidity, and soil moisture. They report over MQTT to
              the Pi, which stores everything and checks against safety rules.
            </p>
            <p class="mt-4 leading-relaxed max-w-[640px]">
              The AI agent reviews the full picture every few minutes — sensor
              trends, plant profiles, time of day, growth stage — and decides
              what to do next. Water zone 1 for five minutes. Open the vents
              before the afternoon heat. Turn the heater on tonight.
            </p>
            <p class="mt-4 leading-relaxed max-w-[640px]">
              You get a Telegram message when it acts, and you can ask it
              anything: "How are the tomatoes?"
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══════════════════════════════════════════ PULL QUOTE 2 -->
    <div class="px-6 md:px-12 lg:px-20 py-[clamp(4rem,10vh,8rem)]">
      <p
        class="font-black leading-[1.15] max-w-3xl"
        style="font-size: clamp(1.75rem, 4vw, 3rem);"
      >
        You get a Telegram message when it acts.
        <span class="text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]">
          And you can ask it anything.
        </span>
      </p>
    </div>

    <!-- ═══════════════════════════════════════════════ 04 THE STACK -->
    <section id="stack" class="px-6 md:px-12 lg:px-20 py-[clamp(2rem,4vh,3rem)]">
      <hr class="border-[var(--color-muted)]/20 dark:border-[var(--color-muted-dark)]/20 mb-[clamp(2rem,4vh,3rem)]" />

      <!-- 30/70 label | content grid (mirrors section 03) -->
      <div class="flex flex-col lg:flex-row gap-4 lg:gap-12">
        <div class="lg:w-[30%]">
          <span
            class="block font-black text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]"
            style="font-size: clamp(3rem, 6vw, 5rem);"
          >04</span>
          <h2
            class="font-black leading-[1.05] tracking-tight mt-2"
            style="font-size: clamp(2rem, 4vw, 3.5rem);"
          >
            The Stack
          </h2>
        </div>
        <div class="lg:w-[70%] lg:pt-2">
          <p class="leading-relaxed max-w-[640px]">
            Rust (field layer), Python (AI agent), Astro (dashboard),
            C++/PlatformIO (ESP32 firmware), Mosquitto (MQTT), SQLite,
            Ollama + cloud LLM.
          </p>
        </div>
      </div>

      <!-- Narrow image strip — texture, not focal -->
      <div class="mt-[clamp(2rem,4vh,3rem)] -mx-6 md:-mx-12 lg:-mx-20 overflow-hidden">
        <img
          src="/images/turgor-stack.webp"
          alt="Greenhouse glass panels at night with abstract light reflections"
          class="w-full object-cover"
          style="height: clamp(8rem, 15vh, 12rem);"
          loading="lazy"
          decoding="async"
        />
      </div>

      <hr class="border-[var(--color-muted)]/20 dark:border-[var(--color-muted-dark)]/20 mt-[clamp(2rem,4vh,3rem)]" />
    </section>

    <!-- ═══════════════════════════════════════════ 05 OPEN SOURCE -->
    <section id="opensource" class="pt-[clamp(4rem,8vh,6rem)] pb-[clamp(4rem,8vh,6rem)]">
      <!-- Full-bleed image -->
      <img
        src="/images/turgor-opensource.webp"
        alt="Rows of young seedlings in a greenhouse with morning light"
        class="w-full object-cover"
        style="max-height: clamp(18rem, 45vh, 32rem);"
        loading="lazy"
        decoding="async"
      />

      <div class="px-6 md:px-12 lg:px-20 mt-[clamp(3rem,6vh,5rem)]">
        <span
          class="block font-black text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]"
          style="font-size: clamp(3rem, 6vw, 5rem);"
        >05</span>
        <h2
          class="font-black leading-[1.05] tracking-tight mt-2"
          style="font-size: clamp(2rem, 4vw, 3.5rem);"
        >
          Open Source
        </h2>
        <p class="mt-6 leading-relaxed max-w-[640px]">
          Turgor is fully open source. Designed for a single backyard greenhouse
          today, architected to scale to many. Built by Ovmi because we believe
          the best way to prove AI integration expertise is to ship it — from
          silicon to soil.
        </p>
        <a
          href="https://turgor.garden"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block mt-8 font-bold
                 text-[var(--color-accent)] dark:text-[var(--color-accent-dark)]
                 hover:opacity-70 transition-opacity"
          style="font-size: clamp(1.25rem, 2vw, 1.75rem);"
        >
          turgor.garden &rarr;
        </a>
      </div>
    </section>
  </article>

  <Footer />
</Base>
